<section class="content" [ngClass]="{'zero-margin': profile.progress < 82}">
	<div class="container-fluid">
		<div class="row clearfix m-t-123">
			<div class="col-md-12">
				<div class="card fadeIn text-white feeds-container" style="margin: 0 !important;">
					<div class="body bg-pink profile-header">
                        <img src="{{ currentUser.bg_image?currentUser.bg_image : 'assets/images/default/default.png' }}"/>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="row clearfix">
			<div class="col-md-3 m-t--30">
				<div class="card member-card transparent fadeIn">
                    <div class="member-img">
                        <a [routerLink]="['/general-profile', currentUser.slug]" class="">
                        <img src="{{ currentUser.avatar?currentUser.avatar : 'assets/images/default/avatar.jpg'}}" class="user_pic rounded-circle img-raised" alt="profile-image">
                        </a>
                    </div>
                    <div class="body">
                        <div class="col-12">
                        	<h6 *ngIf="profile.role === 'business'">{{ profile.roleData.name | titlecase }}</h6>

                            <h6 *ngIf="profile.role !== 'business'">{{ currentUser.name | titlecase }}</h6>

                        	<p *ngIf="profile.role === 'mentor'" class="text-muted"><strong>{{ profile.roleData.current_job_position }}</strong></p>

                        	<p *ngIf="profile.role === 'student'" class="text-muted"><strong>{{ profile.role | titlecase }}</strong></p>

                        	<p class="text-muted">{{ currentUser.bio?currentUser.bio : defaultBio }} </p>
                           
                            <p class="text-muted text-left"><i class="icon-pointer"></i> 
                            	 <span *ngIf="currentUser.state"> {{ currentUser.state }}, </span> 
                					{{ currentUser.country? currentUser.country : 'Address not set' }}
                            </p>
                            <p class="text-muted text-left"><i class="icon-link"></i> {{ currentUser.email }}</p>
                            <p class="text-muted text-left"><i class="icon-calendar"></i> {{ currentUser.created_at | date: 'mediumDate' }}</p>
                        </div>
                        <hr>
                        <div class="row text-center">
                            <div class="col-12">
                               <a [routerLink]="'/edit-profile'" class="btn btn-warning btn-round wave">Edit Profile</a>
                            </div>
                        </div>
                    </div>
                </div>
			</div>


            <!-- For Business -->
			<div class="col-md-6" *ngIf="profile.role ==='business'">
				<div class="profile-pane fadeIn"> 
					<ul class="nav nav-tabs" id="myTab" role="tablist">
					  <li class="nav-item" *ngFor="let tab of profileTabs; let first = first">
					    <a class="nav-link" [class.active]="selectedTab === tab" [attr.data-toggle]="tab" href="javascript:void(0);" (click)="selectedTab = tab" role="tab" [attr.aria-controls]="tab" [attr.aria-selected]="{true: first}">{{ tab|titlecase }} </a>
					  </li>
					</ul>
				</div>
				<div class="row clearfix m-t-20"> 
					<div class="col-sm-12 col-md-12">
					<div class="tab-content fadeIn">
                		<div
                		*ngIf="selectedTab === profileTabs[0]" 
                		role="tabpanel" class="tab-pane active" 
                		[class.in]="selectedTab === profileTabs[0]" 
                		id="{{ selectedTab }}">

                			<!-- Tab Contents -->

                			<div class="card feeds-container bg_grey zero-m" *ngIf="profile.followers.length === 0">
				                <div class="body">
				                    <p class="text-center">You don't have any follower yet.</p>
				                </div>
							</div>
                            <div class="card feeds-container" *ngIf="profile.followers.length > 0">
                                <div class="body">
                                   <div class="row clearfix mb-2" *ngFor="let user of profile.followers">
                                        <div class="col-md-9">
                                            <a [routerLink]="">
                                                    <img 
                                                    class="" 
                                                    src="{{ user.avatar?user.avatar : 'assets/images/default/avatar.jpg'}}" 
                                                    alt="" width="40" class="rounded-circle">
                                                    <div class="media-body">
                                                        <span class="name">{{ user.name | titlecase }}</span><br/>
                                                        <span class="follow-subtext">Joined: {{ user.created_at | date: 'mediumDate' }} - {{ user.state }}, {{ user.country }}</span>

                                                    </div>
                                                   
                                                </a>
                                        </div>

                                        <div class="col-md-3">
                                             <button *ngIf="!isFollowing(user.id)" (click)="followUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> Follow
                                            </button>
                                            <button *ngIf="isFollowing(user.id)" (click)="unFollowUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> UnFollow
                                            </button>  
                                        </div>
                                    </div>
                                </div>
                            </div>

							<!--//Tab Contents -->

                		</div>
                	</div>

                	<div class="tab-content">
                		<div
                		*ngIf="selectedTab === profileTabs[1]" 
                		role="tabpanel" class="tab-pane active" 
                		[class.in]="selectedTab === profileTabs[1]" 
                		id="{{ selectedTab }}">

                			<!-- Tab Contents -->

							<div class="card feeds-container bg_grey zero-m" *ngIf="profile.following.length === 0">
				                <div class="body">
				                    <p class="text-center">You are not following anyone. Follow to receive their feeds and articles.</p>
				                </div>
							</div>
                            <div class="card feeds-container" *ngIf="profile.following.length > 0">
                                <div class="body">
                                    <div class="row clearfix mb-1" *ngFor="let user of profile.following">
                                        <div class="col-md-9">
                                            <a [routerLink]="">
                                                    <img 
                                                    class="" 
                                                    src="{{ user.avatar?user.avatar : 'assets/images/default/avatar.jpg'}}" 
                                                    alt="" width="45" class="rounded-circle">
                                                    <div class="media-body">
                                                        <span class="name">{{ user.name | titlecase }}</span><br/>
                                                        <span class="follow-subtext">Joined: {{ user.created_at | date: 'mediumDate' }} - {{ user.state }}, {{ user.country }}</span>

                                                    </div>
                                                   
                                                </a>
                                        </div>

                                        <div class="col-md-3">
                                             <button *ngIf="!isFollowing(user.id)" (click)="followUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> Follow
                                            </button>
                                            <button *ngIf="isFollowing(user.id)" (click)="unFollowUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> UnFollow
                                            </button>  
                                        </div>
                                    </div>
                                   
                                </div>
                            </div>

							<!--//Tab Contents -->

                		</div>
                	</div>

                	<div class="tab-content">
                		<div
                		*ngIf="selectedTab === profileTabs[2]" 
                		role="tabpanel" class="tab-pane active" 
                		[class.in]="selectedTab === profileTabs[2]" 
                		id="{{ selectedTab }}">


                			<!-- Tab Contents -->

                			<div class="row clearfix">
                              <div class="col-12" *ngIf="partners.length === 0">
                                  <div class="card feeds-container bg_grey zero-m">
                                    <div class="body">
                                        <p class="text-center">You don't have any partnership.</p>
                                    </div>
                                  </div>
                              </div>
                              <div class="col-md-6 col-12" *ngFor="let partner of partners">
                                <div class="card feeds-container">
                                    <div class="body text-center">
                                        <div> <span>
                                            <img src="{{ partner.user.avatar?partner.user.avatar : 'assets/images/default/avatar.jpg' }}" alt="user" class="mb-3 rounded-circle img-raised" width="70"></span>
                                        </div>
                                        <h6>{{ partner.user.name | titlecase }}</h6>
                                        <h6 class="text-muted">Venture: {{ partner.venture.venture_name | titlecase }}</h6>
                                        <small>
                                            <span class="badge " [ngClass]="{'badge-success': partner.status === 'accepted', 'badge-warning': partner.status === 'pending', 'badge-danger': partner.status ==='rejected'}">{{ partner.status }}
                                            </span><br/>
                                        </small>
                                        <button *ngIf="partner.status === 'pending'" (click)="acceptPartner(partner)" class="btn btn-sm btn-success btn-round waves-effect">Accept Partnership</button>
                                    </div>
                                </div>
                             </div>         
                            </div>

							<!--//Tab Contents -->
							
                		</div>
                	</div>


                    <div class="tab-content">
                        <div
                        *ngIf="selectedTab === profileTabs[3]" 
                        role="tabpanel" class="tab-pane active" 
                        [class.in]="selectedTab === profileTabs[3]" 
                        id="{{ selectedTab }}">


                            <!-- Tab Contents -->

                            <div class="row clearfix">
                                <div class="col-md-12 text-center m-b-10">
                                    <button (click)="newVenture()" class="btn btn-round btn-warning waves-effect">
                                        <fa-icon [icon]="['fas','plus']"></fa-icon> Add New Venture
                                    </button>
                                    <br/>
                                    <p *ngIf="ventures.length === 0">Your Venture list is empty</p>
                                </div>
                                <div class="col-lg-6 col-md-12" *ngFor="let venture of ventures; let i = index">
                                <div class="card taskboard feeds-container">
                                    <div class="body planned_task zero-m">
                                        <div class="dd" data-plugin="nestable">
                                            <ol class="dd-list">
                                                <li class="dd-item" data-id="{{ index+1 }}">
                                                    <div class="dd-handle bg_grey">{{ venture.identifier }}</div>
                                                    <div class="dd-content p-15">
                                                        <div class="" [ngStyle]="{'min-height':'120px'}">
                                                            <h5>{{ venture.venture_name  }}</h5>
                                                        </div>
                                                        <div class="" [ngStyle]="{'min-height':'60px'}">
                                                            <p>{{ venture.venture_description | excerpt: 120 }}</p>
                                                        </div>
                                                        <hr>
                                                        <div class="action">
                                                            <button (click)="editVenture(venture.id)" type="button" class="btn btn-sm btn-warning waves-effect" title="Edit"><i class="icon-note"></i></button>

                                                            <button (click)="deleteVenture(venture.id)" type="button" class="btn btn-sm btn-warning waves-effect" title="Delete"><i class="icon-trash"></i></button>
                                                        </div>
                                                    </div>
                                                </li>                                    
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>

                            <!--//Tab Contents -->
                            
                        </div>
                    </div>
                </div>
				</div>
			</div>



            <!-- For Mentors and Students -->
            <div class="col-md-6" *ngIf="profile.role !=='business'">
                <div class="profile-pane"> 
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                      <li class="nav-item" *ngFor="let tab of profileTabs; let first = first">
                        <a class="nav-link" [class.active]="selectedTab === tab" [attr.data-toggle]="tab" href="javascript:void(0);" (click)="selectedTab = tab" role="tab" [attr.aria-controls]="tab" [attr.aria-selected]="{true: first}">{{ tab|titlecase }} </a>
                      </li>
                    </ul>
                </div>
                <div class="row clearfix m-t-20"> 
                    <div class="col-sm-12 col-md-12">
                    <div class="tab-content">
                        <div
                        *ngIf="selectedTab === profileTabs[0]" 
                        role="tabpanel" class="tab-pane active" 
                        [class.in]="selectedTab === profileTabs[0]" 
                        id="{{ selectedTab }}">

                            <!-- Tab Contents -->

                            <div class="card feeds-container bg_grey zero-m" *ngIf="profile.followers.length === 0">
                                <div class="body">
                                    <p class="text-center">You don't have any follower yet.</p>
                                </div>
                            </div>
                            <div class="card feeds-container" *ngIf="profile.followers.length > 0">
                                <div class="body">
                                    <div class="row clearfix mb-1" *ngFor="let user of profile.followers">
                                        <div class="col-md-9">
                                            <a [routerLink]="">
                                                    <img 
                                                    class="" 
                                                    src="{{ user.avatar?user.avatar : 'assets/images/default/avatar.jpg'}}" 
                                                    alt="" width="45" class="rounded-circle">
                                                    <div class="media-body">
                                                        <span class="name">{{ user.name | titlecase }}</span><br/>
                                                        <span class="follow-subtext">Joined: {{ user.created_at | date: 'mediumDate' }} - {{ user.state }}, {{ user.country }}</span>

                                                    </div>
                                                   
                                                </a>
                                        </div>

                                        <div class="col-md-3">
                                             <button *ngIf="!isFollowing(user.id)" (click)="followUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> Follow
                                            </button>
                                            <button *ngIf="isFollowing(user.id)" (click)="unFollowUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> UnFollow
                                            </button>  
                                        </div>
                                    </div>
                                   
                                </div>
                            </div>

                            <!--//Tab Contents -->

                        </div>
                    </div>

                    <div class="tab-content">
                        <div
                        *ngIf="selectedTab === profileTabs[1]" 
                        role="tabpanel" class="tab-pane active" 
                        [class.in]="selectedTab === profileTabs[1]" 
                        id="{{ selectedTab }}">
                            <!-- Tab Contents -->

                            <div class="card feeds-container bg_grey zero-m" *ngIf="profile.following.length === 0">
                                <div class="body">
                                    <p class="text-center">You are not following anyone. Follow to receive their feeds and articles.</p>
                                </div>
                            </div>
                            <div class="card feeds-container" *ngIf="profile.following.length > 0">
                                <div class="body">
                                    <div class="row clearfix mb-1"  *ngFor="let user of profile.following">
                                         <div class="col-md-9">
                                            <a [routerLink]="">
                                                    <img 
                                                    class="" 
                                                    src="{{ user.avatar?user.avatar : 'assets/images/default/avatar.jpg'}}" 
                                                    alt="" width="45" class="rounded-circle">
                                                    <div class="media-body">
                                                        <span class="name">{{ user.name | titlecase }}</span><br/>
                                                        <span class="follow-subtext">Joined: {{ user.created_at | date: 'mediumDate' }} - {{ user.state }}, {{ user.country }}</span>

                                                    </div>
                                                   
                                                </a>
                                        </div>

                                        <div class="col-md-3">
                                             <button *ngIf="!isFollowing(user.id)" (click)="followUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> Follow
                                            </button>
                                            <button *ngIf="isFollowing(user.id)" (click)="unFollowUser(user.id)" class="btn btn-follow waves-effect">
                                                <fa-icon [icon]="['fas','plus']"></fa-icon> UnFollow
                                            </button>  
                                        </div>
                                    </div>
                                   
                                </div>
                            </div>

                            <!--//Tab Contents -->

                        </div>
                    </div>

                    <div class="tab-content">
                        <div
                        *ngIf="selectedTab === profileTabs[2]" 
                        role="tabpanel" class="tab-pane active" 
                        [class.in]="selectedTab === profileTabs[2]" 
                        id="{{ selectedTab }}">


                            <!-- Tab Contents -->

                            <div class="row clearfix">
                              <div class="col-12" *ngIf="partners.length === 0">
                                  <div class="card feeds-container bg_grey zero-m">
                                    <div class="body">
                                        <p class="text-center">You don't have any partnership.</p>
                                    </div>
                                  </div>
                              </div>
                              <div class="col-md-6 col-12" *ngFor="let partner of partners">
                                <div class="card feeds-container">
                                    <div class="body text-center">
                                        <h6>{{ partner.business.name  | titlecase }}</h6>
                                        <h6 class="text-muted">{{ partner.venture.venture_name | titlecase }}</h6>
                                        <small>
                                            <span class="badge " [ngClass]="{'badge-success': partner.status === 'accepted', 'badge-warning': partner.status === 'pending', 'badge-danger': partner.status ==='rejected'}">{{ partner.status }}
                                            </span><br/>
                                        </small>

                                        <div class="alert alert-info p-2" *ngIf="partner.status === 'pending'">
                                            Application is pending approval
                                        </div>
                                    </div>
                                </div>
                             </div>         
                            </div>
                            <!--//Tab Contents -->
                            
                        </div>
                    </div>
                </div>
                </div>
            </div>


			<div class="col-md-3 m-t-80 sticky">
              <div class="row clearfix">
                <div class="col-md-12">
                  <app-follow></app-follow>
                </div>
              </div>

			</div>
		</div>
	</div>
</section>


<!-- Modal Section -->
<div class="modal fade" [ngStyle]="{'z-index':'9999'}" #ventureModal id="ventureModal" tabindex="-1" role="dialog" [attr.aria-hidden]="true" style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div  class="modal-header custom-modal-header" 
            [ngStyle]="{'margin-top': 0, 'padding': '9px', 'text-align': 'center'}">
                <img [src]="currentUser.avatar" class="rounded-circle img-raised img-border" height="45" width="45" />
            </div>
            <div class="modal-body"> 
                    <br/>
                  <div class="form-group">
                      <input 
                      type="text" 
                      placeholder="Venture Name" 
                      class="form-control" 
                      [(ngModel)]="ventureName">
                  </div>
                  <div class="form-group">
                    <textarea 
                    [(ngModel)]="ventureDescription" 
                    rows="4" class="form-control" 
                    placeholder="About this Venture"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" 
                (click)="submitVenture()" 
                class="btn btn-round btn-success waves-effect">{{ ventureButton }}</button>
                <button (click)="closeModal()" type="button" class="btn btn-round btn-white waves-effect">CLOSE</button>
            </div>
        </div>
    </div>
</div>