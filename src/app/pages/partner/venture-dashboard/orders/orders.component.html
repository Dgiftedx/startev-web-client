<div class="row clearfix" *ngIf="orders">
	<div class="col-md-12">

        <div class="card feeds-container fadeIn" *ngIf="showModBox">

            <div class="header">
              <h2><strong>View/Modify</strong> Order</h2>

              <button type="button" (click)="closeModBox()" class="float-right btn btn-icon btn-round btn-icon-mini btn-white waves-effect">
                  <i class="zmdi zmdi-close 2x"></i>
              </button>
            </div>
            <div class="body" *ngIf="singleOrder">
                <table class="table">
                  <tr>
                    <td>
                      Transaction Refference: 
                    </td>
                    <td>
                      <strong class="text-success">{{ singleOrder.transaction_ref }}</strong>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>Buyer Name: </strong></td>
                    <td>{{ singleOrder.name }}</td>
                  </tr>

                  <tr>
                    <td><strong>Delivery Address: </strong></td>
                    <td>{{ singleOrder.delivery_address }}</td>
                  </tr>

                  <tr>
                    <td><strong>Order Date: </strong></td>
                    <td>{{ singleOrder.order_date | date: 'longDate' }}</td>
                  </tr>
                  <tr>
                    <td><strong>Order Status: </strong></td>
                    <td>{{ singleOrder.orders[0].status }}</td>
                  </tr>
                </table>

                <div class="table-responsive">
                  <p>Items</p>
                <table class="table mt-3">
                  <tr *ngFor="let order of singleOrder.orders">
                      <td>Item: </td>
                      <td>
                        {{ order.product.product_name }}
                      </td>
                      <td>Unit Price</td>
                      <td>
                        {{ order.product.product_price }}
                      </td>

                      <td>Total: </td>
                      <td>
                        {{ order.amount | number:0 }}
                      </td>

                      <td>Quantity</td>
                      <td style="min-width: 120px !important;">
                         <div class="form-group">
                          <input class="form-control" [readonly]="true" [(ngModel)]="order.quantity">
                        </div>
                      </td>

                      <td>
                        <!-- <button class="btn btn-sm btn-danger waves-effect">Cancel Order</button> -->
                        <!-- <button class="btn btn-sm btn-warning waves-effect">Update Order</button> -->
                      </td>
                  </tr>
                </table>

                <div class="">
                  <button 
                  (click)="forwardOrders(singleOrder)"
                  type="button"
                  [disabled]="singleOrder.forwarded"
                  [ladda]="sendingOrder"
                  class="btn btn-sm btn-warning color-white waves-effect">Forward Orders To Venture</button>
                </div>
                </div>
            </div>
        </div>
        <div class="card slideDown product_item_list product-order-list feeds-container" *ngIf="showMainOrders">
            <div class="body">
                <div class="mt-3 text-center">
                     <div class="form-group">
                            <input
                                type="text"
                                class="form-control"
                                placeholder="Type to filter order id column..."
                                (keyup)="updateFilter($event)"
                              />
                       </div>
                    <!-- ngx datatable -->
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr>
                            <th>S/N</th>
                            <th>Name</th>
                            <th>Order ID</th>
                            <th>Items</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody *ngIf="orders">
                          <tr *ngFor="let item of orders; let index = index;">
                            <td>{{ index + 1 }}</td>
                            <td>
                              {{ item.name }}
                            </td>
                            <td>{{ item.order_id }}</td>
                            <td>{{ item.items }}</td>
                            <td>{{ item.date|date:'mediumDate' }}</td>
                            <td>
                               <span 
                             class="badge badge-success bg-success text-white" 
                             *ngIf="item.status === 'delivered'">{{ item.status | titlecase }}</span>

                             <span 
                             class="badge badge-warning bg-warning text-white" 
                             *ngIf="item.status !== 'delivered'">{{ item.status | titlecase }}</span>
                            </td>
                            <td>
                              <!-- Edit product -->
                            <button 
                            class="btn btn-icon btn-icon-mini btn-round btn-warning waves-effect" 
                            (click)="editOrder(item.order_id)">
                             <i class="zmdi zmdi-edit"></i>
                            </button>

                            </td>
                          </tr>
                        </tbody>
                      </table>

                    </div>
                </div>
            </div>
        </div>
        
    </div>
</div>
